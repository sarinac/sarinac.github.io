<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Holst - The Planets | If Colorful</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Sarina Chen"><meta name=description content="Portfolio of Sarina Chen"><meta property="og:description" content="Portfolio of Sarina Chen"><meta property="og:image" content="https://ifcolorful.com/_general/preview.png"><meta name=twitter:image content="https://ifcolorful.com/_general/preview.png"><link rel=icon href=https://ifcolorful.com/_general/favicon.svg type=image/x-icon><link rel="shortcut icon" href=https://ifcolorful.com/_general/favicon.svg type=image/x-icon><link rel=stylesheet href=/css/main.css></head><body><nav class=main-navigation><a href=https://ifcolorful.com/ class=main-navigation-logo><svg id="ifcolorful-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 356.0831 71.2166"><defs><style>.gray{fill:#648585}.yellow{fill:#eaac61}.green{fill:#20cc94}.blue{fill:#00a1e1}.purple{fill:#a58eff}.text{fill:#f7f8f9}</style></defs><rect class="gray" width="71.2166" height="71.2166"/><rect class="yellow" x="71.2166" width="71.2166" height="71.2166"/><rect class="green" x="142.4333" width="71.2166" height="71.2166"/><rect class="blue" x="213.6499" width="71.2166" height="71.2166"/><rect class="purple" x="284.8665" width="71.2166" height="71.2166"/><path class="text" d="M141.8116 321.0127H137.24V294.4416h-8.993v-3.9549h13.5645zm-2.2282-42.07a2.9723 2.9723.0 012.1987.9228 3.0455 3.0455.0 01.9068 2.2121 3.0867 3.0867.0 01-.8934 2.2563 2.9826 2.9826.0 01-2.2121.9082 2.8769 2.8769.0 01-2.1239-.9523 3.0826 3.0826.0 01-.9229-2.2122 3.0341 3.0341.0 01.9229-2.1974A2.9006 2.9006.0 01139.5834 278.9432z" transform="translate(-121.9584 -264.3917)"/><path class="text" d="M185.7254 280.1442l-1.201 3.7208a21.3234 21.3234.0 00-5.8313-.9376q-2.46.0-3.3837 1.3923-.923 1.39-.9229 5.6093v.5577h10.2556v3.9549H174.3865v26.5711h-4.5687V294.4416h-7.677v-3.9549h7.677v-1.0258q0-5.83 1.9928-8.1732 1.99-2.3452 6.8825-2.3445A23.9489 23.9489.0 01185.7254 280.1442z" transform="translate(-121.9584 -264.3917)"/><path class="text" d="M221.3231 319.9869a20.8687 20.8687.0 01-8.76 1.8162q-7.2063.0-11.5-4.3788t-4.2905-11.6452q0-7.2663 4.32-11.6452a15.24 15.24.0 0111.3523-4.38 24.0535 24.0535.0 018.76 1.6116l-1.2011 3.7783a23.2883 23.2883.0 00-7.5-1.4351 10.24 10.24.0 00-7.9846 3.2514q-2.941 3.252-2.9424 8.8191a12.5193 12.5193.0 003.0467 8.5691 10.0611 10.0611.0 007.9392 3.4707 23.2013 23.2013.0 007.9685-1.494z" transform="translate(-121.9584 -264.3917)"/><path class="text" d="M245.6085 289.7538a12.4492 12.4492.0 0110.0175 4.3948q3.72 4.3936 3.7208 11.5717.0 7.2363-3.7208 11.66a13.5892 13.5892.0 01-20.051.0147q-3.7075-4.41-3.7075-11.6746.0-7.2062 3.7208-11.5864A12.4722 12.4722.0 01245.6085 289.7538zm0 28.0651a7.5465 7.5465.0 006.5616-3.5149 16.6768 16.6768.0 00.0294-17.1969 8.1238 8.1238.0 00-13.1846-.0441 17.0166 17.0166.0 00.0294 17.2852A7.526 7.526.0 00245.6085 317.8189z" transform="translate(-121.9584 -264.3917)"/><path class="text" d="M291.221 321.0127H278.74V283.6309h-7.9686v-3.9548h12.54v37.3818h7.91z" transform="translate(-121.9584 -264.3917)"/><path class="text" d="M317.6169 289.7538a12.4492 12.4492.0 0110.0175 4.3948q3.72 4.3936 3.7208 11.5717.0 7.2363-3.7208 11.66a13.5892 13.5892.0 01-20.051.0147q-3.7075-4.41-3.7075-11.6746.0-7.2062 3.7208-11.5864A12.4722 12.4722.0 01317.6169 289.7538zm0 28.0651a7.5465 7.5465.0 006.5616-3.5149 16.6768 16.6768.0 00.0294-17.1969 8.1238 8.1238.0 00-13.1846-.0441 17.0166 17.0166.0 00.0294 17.2852A7.526 7.526.0 00317.6169 317.8189z" transform="translate(-121.9584 -264.3917)"/><path class="text" d="M365.9283 291.3066l-1.8456 4.3948a13.4166 13.4166.0 00-5.2161-1.3187 7.5988 7.5988.0 00-3.9535 1.1569 12.6727 12.6727.0 00-3.56 3.31 11.9579 11.9579.0 00-1.6263 2.4168v19.7461h-4.542v-30.526h4.542v6.18q3.6632-6.9134 9.4932-6.9133A15.4094 15.4094.0 01365.9283 291.3066z" transform="translate(-121.9584 -264.3917)"/><path class="text" d="M401.756 280.1442l-1.201 3.7208a21.3245 21.3245.0 00-5.8313-.9376q-2.46.0-3.3838 1.3923-.9228 1.39-.9228 5.6093v.5577h10.2556v3.9549H390.4171v26.5711h-4.5687V294.4416h-7.677v-3.9549h7.677v-1.0258q0-5.83 1.9928-8.1732 1.99-2.3452 6.8825-2.3445A23.9489 23.9489.0 01401.756 280.1442z" transform="translate(-121.9584 -264.3917)"/><path class="text" d="M437.4071 321.0127h-4.5687v-4.5112q-4.9231 5.2441-10.3706 5.2441-8.5865.0-8.5838-10.4V290.4867h4.5687v19.54a10.958 10.958.0 001.2305 5.8152 4.5627 4.5627.0 004.1622 1.9193q4.1889.0 8.993-5.2148v-22.06h4.5687z" transform="translate(-121.9584 -264.3917)"/><path class="text" d="M471.2446 321.0127H458.7635V283.6309H450.795v-3.9548h12.54v37.3818h7.91z" transform="translate(-121.9584 -264.3917)"/></svg></a><div class=sub-navigation><a href=https://ifcolorful.com/about class=sub-navigation-link id=nav-about>About</a>
<a href=https://ifcolorful.com/showcase class=sub-navigation-link id=nav-showcase>Showcase</a>
<a href=https://ifcolorful.com/projects class=sub-navigation-link id=nav-all-projects>All Projects</a></div></nav><div class=content-wrapper style=padding-bottom:0><div class=showcase-summary><div class=showcase-summary-left><div class=showcase-summary-subtitle><p>Visualization</p></div><div class=showcase-summary-title><h1>Holst - The Planets</h1></div><div class=showcase-summary-description><p>I gathered audio analysis data using the Spotify API and designed visual for each of the 7 planets using scrollytelling.</p></div><div class=showcase-summary-buttons><div class=showcase-summary-button><a href=https://planets.ifcolorful.com class=check-it-out>Check It Out</a></div><div class=showcase-summary-button><a href=https://github.com/sarinac/gustav-holst class=check-it-out>See Code</a></div></div></div><div class=showcase-summary-right><div class=showcase-summary-tool><p>Spotify API</p></div><div class=showcase-summary-tool><p>Pandas</p></div><div class=showcase-summary-tool><p>Canvas</p></div><div class=showcase-summary-tool><p>D3.js</p></div><div class=showcase-summary-tool><p>Scrollama.js</p></div></div></div><div class=showcase-picture style=background-image:url(https://ifcolorful.com/projects/gustav-holst/cover.png)></div></div><div class="content-wrapper project-description" style=padding-top:0><h1 id=inspiration>Inspiration</h1><p>I started practicing oboe again. Thank you <a href=https://www.twosetviolin.com/>TwoSet Violin</a> ðŸŽ»ðŸŽ» for making me go practice. While getting back into classical music and trying to be more cultured, I wanted to reexplore music data as my next data project. I had once analyzed Spotify data last year in my <a href=https://ifcolorful.com/spotify-flowers/>previous work</a> where I colored musical flowers based on their chroma feature, so I wanted to take another shot at visualizing music with the same interesting data but in a different way.</p><h1 id=exploring-spotify-data>Exploring Spotify Data</h1><p>I could have used the same process mentioned in my <a href=https://ifcolorful.com/spotify-flowers/>previous data gathering</a> with the <code>spotipy</code> library, but I wanted to practice using the python <code>requests</code> library which is used very widely across data engineering for integration work. A lot of help came from reading through <code>spotipy</code>&rsquo;s <a href=https://github.com/plamere/spotipy>source code</a>. You can check out my code in Jupyter Notebook <a href=https://github.com/sarinac/gustav-holst/blob/main/data/exploratory.ipynb>here</a>.</p><p>After collecting the dataset for all 7 movements, I did some validations, comparing the data against my musical knowledge and personal orchestra experience playing this symphony. I came to a conclusion that Spotify is <strong>not</strong> reliable for classical music. The classical genre is structurally and theoretically more complex than mainstream pop, of which the majority uses the same <a href="https://www.youtube.com/watch?v=5pidokakU4I">four-chord progression</a>. The metrics, like danceability and energy, used to describe music favors simpler genres or songs that express a single, static emotion. Classic music ranks low in these metrics which make the data look humiliating.</p><p>In the charts below, I thought popularity and loudness were the most realistic. Acousticness and instrumentlness should have been 100%. Finally, I don&rsquo;t think danceability, energy, and valence are good indicators for classical movements that might contain different emotions and evolving ideas.</p><p><img src=listening_features.png alt></p><p>Spotify does provide other data that are more factual. Duration is most reliable metric. Because the pieces have dynamic musical phrases like changing tempo or key, the other metrics are not so useful on the track level. To account for key changes, I used the key signatures from section level data.</p><p><img src=technical_features.png alt></p><p>Spotify&rsquo;s Audio Analysis shows where in the movement gets relatively louder and where different pitches are more prominent. By taking the first key on the section level, the third chart reorders the y-axis such that the tonic (a minor in Jupiter) appears on the bottom. Halfway through the piece, a key change to E-flat is shown in the visual. I was happy with the variety, spacing, and accuracy in the final chart.</p><p><img src=jupiter_analysis.png alt></p><h1 id=experimenting-with-visualization-features>Experimenting with Visualization Features</h1><p>If I had created a static visualization, this entire project would have taken me a week. However, I exploded my scope by exploring 2 features:</p><p><strong>Feature 1: Scrollytelling</strong>
It was my goal this year to experiment with <a href=https://eagereyes.org/blog/2016/the-scrollytelling-scourge>scrollytelling</a>, since it&rsquo;s been used in a lot of journalism. The New York Times has my <a href=https://www.nytimes.com/interactive/2020/03/22/world/coronavirus-spread.html>favorite example</a> of this concept.</p><p><strong>Feature 2: D3.js and Canvas Hybrid</strong></p><p>I actually stumbled upon this <a href=https://bocoup.com/blog/d3js-and-canvas>hybrid approach</a> and didn&rsquo;t know it existed until I needed it. At first I used only D3.js, but it got very slow when I started using transitions. I was rendering well over 1,000 elements in the DOM. Canvas is more performant for this use case because <code>canvas</code> is a single DOM element. I knew about this performance-hit already but still low-key tried to pull it off with D3.js&mldr; obviously, it didn&rsquo;t work.</p><p>I switched to using only Canvas. However, when I started animating, interpolating <strong>e v e r y t h i n g</strong> and natively keeping track of keys (e.g. the shape for the second note of A-flat in Mercury needs to move the position of the second note of A-flat in Jupiter) was so low-level and so not worth the time. Data binding is D3.js&rsquo;s specialty, and I needed to find some way to easily implement binding for Canvas.</p><p>After searching explicitly for data binding on Canvas on Google, I found this golden article on the <a href=https://bocoup.com/blog/d3js-and-canvas>hybrid approach</a>. It involves first writing everything in D3.js but replacing the foundational SVG element with a dummy element, which would not render. The second half is writing code for making Canvas render the D3.js objects with this magical code.</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=color:#75af00>d3</span><span style=color:#111>.</span><span style=color:#75af00>select</span><span style=color:#111>(</span><span style=color:#d88200>&#34;#elements-created-in-d3&#34;</span><span style=color:#111>).</span><span style=color:#75af00>each</span><span style=color:#111>(</span><span style=color:#00a8c8>function</span><span style=color:#111>(</span><span style=color:#75af00>d</span><span style=color:#111>)</span> <span style=color:#111>{</span>
  <span style=color:#00a8c8>var</span> <span style=color:#75af00>node</span> <span style=color:#f92672>=</span> <span style=color:#75af00>d3</span><span style=color:#111>.</span><span style=color:#75af00>select</span><span style=color:#111>(</span><span style=color:#00a8c8>this</span><span style=color:#111>);</span>

  <span style=color:#75af00>context</span><span style=color:#111>.</span><span style=color:#75af00>fillStyle</span> <span style=color:#f92672>=</span> <span style=color:#75af00>node</span><span style=color:#111>.</span><span style=color:#75af00>attr</span><span style=color:#111>(</span><span style=color:#d88200>&#34;fillStyle&#34;</span><span style=color:#111>);</span>
  <span style=color:#75af00>context</span><span style=color:#111>.</span><span style=color:#75af00>rect</span><span style=color:#111>(</span><span style=color:#75af00>node</span><span style=color:#111>.</span><span style=color:#75af00>attr</span><span style=color:#111>(</span><span style=color:#d88200>&#34;x&#34;</span><span style=color:#111>),</span> <span style=color:#75af00>node</span><span style=color:#111>.</span><span style=color:#75af00>attr</span><span style=color:#111>(</span><span style=color:#d88200>&#34;y&#34;</span><span style=color:#111>),</span> <span style=color:#75af00>node</span><span style=color:#111>.</span><span style=color:#75af00>attr</span><span style=color:#111>(</span><span style=color:#d88200>&#34;size&#34;</span><span style=color:#111>),</span> <span style=color:#75af00>node</span><span style=color:#111>.</span><span style=color:#75af00>attr</span><span style=color:#111>(</span><span style=color:#d88200>&#34;size&#34;</span><span style=color:#111>));</span>
  <span style=color:#75af00>context</span><span style=color:#111>.</span><span style=color:#75af00>fill</span><span style=color:#111>();</span>

<span style=color:#111>});</span>
</code></pre></div><h1 id=making-it-pretty>Making it Pretty</h1><p>I spend three hours creating 7 color palettes on Illustrator, which was one of my project highlights. :D After rendering the visual, I did have to make a few tweaks. With this color palette, Mercury was too bright to see anything and Jupiter looked too similar to Mars.</p><p><img src=color_palette.png alt></p><p>Again, I was really happy picking colors and thought the my bloopers in mixing up palettes turned out pretty nice.</p><p><img src=bloopers.png alt></p><p>While most of the visual was straightfoward using circles, arcs, and radial areas in D3.js, one performance challenge I had was using filters. I learned that even Canvas renders filters very slowly. This means that for animation, both D3.js and Canvas are not performant when applying any sort of filter. Fingers crossed that I&rsquo;ll eventually find a library that has this capability.</p><p>As a substitute for the glow or gradient filter, I found a <a href=https://www.ashleysheridan.co.uk/blog/Animated+Glowing+Lines+in+Canvas>hack</a> for drawing the same shape with decreasing size but increasing opacity. If you look closely at the loudness meter (the outermost line), you&rsquo;ll see discrete layers that achive the glow effect. I thought that was so cool!</p><p><img src=jupiter_loudness.png alt></p><h1 id=why-is-this-part-i>Why is this Part I?</h1><p>After redoing my project two times (from D3.js to Canvas to hybrid), I wanted to take a mental pause and switch contexts. There are a few things I feel like this work is lacking some detail and there are some more things I wanted to experiment with later on.</p><ul><li>I want to add more supporting visuals that affect the main visual. For example, when I read about the 5/4 time signature in Mars, I want to explicitly point to the pentagon shapes (bars) and highlight the sections where the 5-beat pattern is present. Without these detailed visual explanations, some music theory knowledge might be required to interpret my visual.</li><li>I want to add visuals that compare tracks against each other, such as comparing duration and popularity for all 7 planets.</li><li>Similar to my <a href=https://spotify-flowers.herokuapp.com/>Spotify Flowers</a> project where I built a template for any song, I wanted to either extend this as a template or try some fancy <a href=https://developer.spotify.com/documentation/web-playback-sdk/>web playback</a> or audio interaction.</li></ul></div><footer><div class=footer-inner><div class=footer-inner-left><div class=footer-icons><a href=mailto:sarinarchen@gmail.com><svg width="16" height="14" viewBox="0 0 16 14" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><title>email</title><g class="portfolio-contact" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-94.000000, -336.000000)" id="Group" fill="#505050"><g transform="translate(94.000000, 335.000000)"><g id="ui-16px-1_email-84" transform="translate(0.000000, 1.000000)"><path d="M15 0H1C.448.0.0.447.0 1V13C0 13.553.448 14 1 14H15C15.552 14 16 13.553 16 13V1C16 .447 15.552.0 15 0zM14 12H2V5.723L7.504 8.868C7.812 9.044 8.189 9.044 8.496 8.868L14 5.723V12zm0-8.58L8 6.849 2 3.42V2H14V3.42z" id="Shape"/></g></g></g></g></svg></a><a href=https://www.linkedin.com/in/sarinachen/ target=blank><svg width="17" height="16" viewBox="0 0 17 16" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><title>linkedin</title><g class="portfolio-contact" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-243.000000, -335.000000)" id="Group" fill="#505050"><g transform="translate(94.000000, 335.000000)"><g id="social-16px_logo-linkedin" transform="translate(149.000000, 0.000000)"><path d="M15.3.0H.7C.3.0.0.3.0.7V15.4C0 15.7.3 16 .7 16H15.4C15.8 16 16.1 15.7 16.1 15.3V.7C16 .3 15.7.0 15.3.0zM4.7 13.6H2.4V6H4.8v7.6H4.7zM3.6 5C2.8 5 2.2 4.3 2.2 3.6 2.2 2.8 2.8 2.2 3.6 2.2S5 2.8 5 3.6C4.9 4.3 4.3 5 3.6 5zm10 8.6H11.2V9.9C11.2 9 11.2 7.9 10 7.9S8.6 8.9 8.6 9.9V13.7H6.2V6H8.5V7C8.8 6.4 9.6 5.8 10.7 5.8 13.1 5.8 13.5 7.4 13.5 9.4V13.6H13.6z" id="Shape"/></g></g></g></g></svg></a><a href=https://github.com/sarinac target=blank><svg width="17" height="17" viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>github</title><g class="portfolio-contact" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="GitHub-Mark" transform="translate(-136.000000, -55.000000)" fill="#505050"><path d="M144.319263 55.455C139.902185 55.455 136.32 59.0366937 136.32 63.4552456 136.32 66.9897924 138.612029 69.9880428 141.791009 71.0459021 142.191267 71.1195692 142.337128 70.8725389 142.337128 70.6603777 142.337128 70.4708077 142.330252 69.967416 142.326323 69.2999922 140.101086 69.7832483 139.631581 68.2273994 139.631581 68.2273994 139.267666 67.303123 138.743156 67.057075 138.743156 67.057075 138.016799 66.5610499 138.798161 66.5708722 138.798161 66.5708722 139.601132 66.6273503 140.02349 67.3954524 140.02349 67.3954524 140.737078 68.617835 141.896107 68.2647241 142.351861 68.0599296 142.424546 67.5432777 142.631305 67.1906579 142.859673 66.9907746 141.083314 66.7889268 139.215608 66.1023495 139.215608 63.0368165 139.215608 62.163616 139.527465 61.4490452 140.039206 60.8901576 139.956698 60.6878187 139.682166 59.8740429 140.117784 58.7729656 140.117784 58.7729656 140.789137 58.5578577 142.317483 59.5931258 142.95544 59.4153426 143.640053 59.326942 144.320246 59.3235043 144.999947 59.326942 145.684069 59.4153426 146.323008 59.5931258 147.850372 58.5578577 148.520743 58.7729656 148.520743 58.7729656 148.957343 59.8740429 148.68281 60.6878187 148.600794 60.8901576 149.113517 61.4490452 149.422919 62.163616 149.422919 63.0368165 149.422919 66.1102073 147.552266 66.7864712 145.770505 66.9843901 146.057315 67.2314204 146.313186 67.7195876 146.313186 68.4660808 146.313186 69.5352357 146.303364 70.3981229 146.303364 70.6603777 146.303364 70.8745034 146.447751 71.1234981 146.853411 71.045411 150.029936 69.9850961 152.32 66.9888101 152.32 63.4552456 152.32 59.0366937 148.737815 55.455 144.319263 55.455" id="Fill-4"/></g></g></svg></a></div></div><div class=footer-inner-center><p>I created my website with <a href=https://gohugo.io/>Hugo</a>.</p></div><div class=footer-inner-right><p><a href=https://ifcolorful.com/>Sarina Chen</a></p></div></div><script src=https://ifcolorful.com/js/jquery-1.js></script><script src=https://ifcolorful.com/js/stickUp.js></script><script src=https://ifcolorful.com/js/scrollIt.js type=text/javascript></script><script type=text/javascript>jQuery(function($){$(document).ready(function(){$('.main-navigation').stickUp({});});});$(function(){$.scrollIt({topOffset:-70,easing:'ease-in-out'});});</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-YQC37FT3TK"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','G-YQC37FT3TK');</script></footer></body></html>